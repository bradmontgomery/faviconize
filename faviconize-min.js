(function(a){a.fn.faviconize=function(c){var c=a.extend({position:"before",linkable:false,exceptions:new Array()},c);function b(d,e){switch(c.position){case"before":d.before(e+"&nbsp;");break;case"after":d.after("&nbsp;"+e);break;default:break}}a(this).each(function(){var d=a(this);var j=d.attr("href").match(/http.*:\/\/[a-z0-9.-]*(\/)?/i);var j=j[0]+((j[1]==null)?"/":"");if(j){if(a.grep(c.exceptions,function(f){f=(f.match(/\/$/)==null)?f+"/":f;return(f==j)}).length==0){var k=j+"favicon.ico";var e=new Image();a(e).attr("src",k);var g='<img src="'+k+'" alt="'+((c.linkable)?d.text():"")+'" '+((c.className)?'class="'+c.className+'"':"")+" />";g=(c.linkable)?'<a href="'+d.attr("href")+'">'+g+"</a>":g;a(e).load(function(){b(d,g)});a(e).error(function(){if(c.defaultImage){b(d,g.replace(/src="(.*?)"/i,'src="'+c.defaultImage+'"'))}})}}})}})(jQuery);